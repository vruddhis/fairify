<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CST Dataset</title>
    <link rel="stylesheet" href="./datasetCST1.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
</head>

<script>
    const form = document.getElementById("uploadForm");
  
    form.addEventListener("submit", async (event) => {
      event.preventDefault();
  
      const formData = new FormData(form);
      formData.append("swap_gender", document.getElementById("swapGenderInput").checked);
  
      try {
        const response = await fetch("http://127.0.0.1:8000/api/convert/", {
          method: "POST",
          body: formData,
        });
  
        if (response.ok) {
          const data = await response.json();
          // Store the data in localStorage for access on the new page
          localStorage.setItem("conversionResults", JSON.stringify(data));
          // Redirect to the results page
          window.location.href = "results.html";
        } else {
          alert("Something went wrong! Please try again.");
        }
      } catch (error) {
        console.error("Error:", error);
      }
    });
  </script>
  

<body>
    <div class="container">

        <div class="header">
            <h2 class="heading">FAIRIFY</h2>
            <p class="subtext">Helping you Debias your Models</p>
        </div>
    
        <div class="progress-container">
            <div class="progress-line"></div>
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <img src="./assets/metric.png" alt="metric">
                </div>
                <div class="step active" data-step="2">
                    <img src="./assets/dataset.png" alt="dataset">
                </div>
                <div class="step" data-step="3">
                    <img src="./assets/model.png" alt="model">
                </div>
            </div>
        </div>
        
       <div class="info">
            <p>
                The dataset should contain sentences that contain terms or phrases you want 
                to test for bias. We will create variants of the sentence where identity terms 
                of the bias axis are swapped with their alternatives across the axis. We will then 
                test how a generative language modelâ€™s responses vary with changes.
            </p>
       </div>

       <div class="datasetOptions">

            <h3 class="pageHead">SELECT A DATASET OPTION</h3>

            <div class="options">
                <button class="b2" onclick="document.getElementById('fileInput').click()">
                    <div class="insidebutton">
                        UPLOAD YOUR OWN DATASET
                        <img src="./assets/button2.png" alt="b2" style="border-radius: 50%;">
                    </div>
                </button>
                <input type="file" id="fileInput" style="display: none;" onchange="handleFileUpload(event)">
                <button class="b1">
                    <div class="insidebutton">
                        CREATE A CUSTOM DATASET
                        <img src="./assets/button1.png" alt="b1" style="border-radius: 50%;">
                    </div>
                </button>
            </div>

            <div class="axes">
                <h3 class="pageHead">SELECT BIAS AXES</h3>
                <select class="dropdown">
                    <option class="textdd" value="gender">Gender</option>
                    <option disabled class="textdd" value="caste">Caste</option>
                    <option disabled class="textdd" value="religion">Religion</option>
                    <option disabled class="textdd" value="race">Race</option>
                </select>
            </div>

       </div>
    </div>
    <div style="height: 50px;"></div>
</body>

</html>